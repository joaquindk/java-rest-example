Running instructions
====================

The application has been developed using Maven as the build tool, so running it simply requires having maven installed and executing the following commands to start the server (or directly run.sh from a unix based machine):

`mvn compile`

`mvn exec:java -Dexec.mainClass="PopularPurchaseService"`

Additionally tests can be executed with

`mvn test`

After that the service can be tested by calling it with curl, or from other tools like Postman. Eg.

`curl http://localhost:4567/api/recent_purchases/Jarret_Schumm`

`curl http://localhost:4567/api/recent_purchases/Nat.Koch90`


Application structure and main classes
=======================================


Spark framework (http://sparkjava.com) has been used for implementing the frequent purchases REST service: its a micro framework for creating web apps in Java 8 and is similar to Express in NodeJs.

* The main entry point for all REST requests is PopularPurchaseService.java
* The API folder found in src/main/api contains the java beans used by the application - these are marshalled and umarshalled from JSON.
* The internal package contains beans used only by our app - in this case only the RecentProductPurchase object.
* The external package contains the beans used by external services, in this case the daw-purchses API

 Caching
 ========

 Caching has been implemented using JCS (https://commons.apache.org/proper/commons-jcs/). The service's responses are cached by username and its only if there is a cache failure that the daw-purchases services are called.

 Given that no caching information is returned from the daw-purchases API on the HTTP headers, the responses obtained from this remote service have not been cached. A possible optimisation would be for the daw-purchases service to include HTTP cache-control headers such that the PurchaseClient could reuse some of its invocations.

 Therefore only the responses generated by the application are cached with JCS - this gives a great optimisation reducing the service response time from 2 seconds to 18 milliseconds when there is a cache hit.

The cache configuration is found under src/main/resources/cache.ccf